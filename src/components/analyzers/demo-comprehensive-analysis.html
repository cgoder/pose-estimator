<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»¼åˆåˆ†æç®¡ç†å™¨æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .content {
            padding: 30px;
        }
        
        .demo-section {
            margin-bottom: 40px;
            padding: 25px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            background: #f8fafc;
        }
        
        .demo-section h2 {
            color: #2c3e50;
            margin-top: 0;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #56ab2f 0%, #a8e6cf 100%);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .config-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .config-group {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .config-group h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.1em;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #555;
        }
        
        .form-group select,
        .form-group input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }
        
        .status-panel {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .status-item {
            text-align: center;
        }
        
        .status-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        
        .status-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .results-panel {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .results-header {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #ddd;
            font-weight: bold;
        }
        
        .results-content {
            padding: 15px;
        }
        
        .result-item {
            margin-bottom: 15px;
            padding: 15px;
            background: #f8fafc;
            border-left: 4px solid #3498db;
            border-radius: 4px;
        }
        
        .result-timestamp {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 8px;
        }
        
        .result-data {
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            background: #2c3e50;
            color: #ecf0f1;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        
        .metric-card h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
        }
        
        .metric-list {
            list-style: none;
            padding: 0;
        }
        
        .metric-list li {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        
        .metric-list li:last-child {
            border-bottom: none;
        }
        
        .metric-value {
            font-weight: bold;
            color: #3498db;
        }
        
        .log-panel {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 3px;
        }
        
        .log-info {
            background: rgba(52, 152, 219, 0.2);
        }
        
        .log-warning {
            background: rgba(241, 196, 15, 0.2);
        }
        
        .log-error {
            background: rgba(231, 76, 60, 0.2);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .analyzing {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸƒâ€â™‚ï¸ ç»¼åˆåˆ†æç®¡ç†å™¨æ¼”ç¤º</h1>
            <p>TensorFlow.js å¥èº«å§¿æ€åˆ†æç³»ç»Ÿ - é«˜çº§åŠŸèƒ½å±•ç¤º</p>
        </div>
        
        <div class="content">
            <!-- é…ç½®é¢æ¿ -->
            <div class="demo-section">
                <h2>âš™ï¸ åˆ†æé…ç½®</h2>
                <div class="config-panel">
                    <div class="config-group">
                        <h3>åˆ†ææ¨¡å¼</h3>
                        <div class="form-group">
                            <label for="analysisMode">åˆ†ææ¨¡å¼:</label>
                            <select id="analysisMode">
                                <option value="basic">åŸºç¡€æ¨¡å¼</option>
                                <option value="advanced">é«˜çº§æ¨¡å¼</option>
                                <option value="comprehensive" selected>ç»¼åˆæ¨¡å¼</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="outputFormat">è¾“å‡ºæ ¼å¼:</label>
                            <select id="outputFormat">
                                <option value="minimal">æœ€ç®€</option>
                                <option value="standard">æ ‡å‡†</option>
                                <option value="detailed" selected>è¯¦ç»†</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="config-group">
                        <h3>æ€§èƒ½è®¾ç½®</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enablePerformanceOptimization" checked>
                                å¯ç”¨æ€§èƒ½ä¼˜åŒ–
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableCaching" checked>
                                å¯ç”¨ç»“æœç¼“å­˜
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="adaptiveQuality" checked>
                                è‡ªé€‚åº”è´¨é‡
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-group">
                        <h3>æ•°æ®å¤„ç†</h3>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableDataSmoothing" checked>
                                æ•°æ®å¹³æ»‘
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableOutlierDetection" checked>
                                å¼‚å¸¸æ£€æµ‹
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enableTrendAnalysis" checked>
                                è¶‹åŠ¿åˆ†æ
                            </label>
                        </div>
                    </div>
                    
                    <div class="config-group">
                        <h3>è­¦å‘Šè®¾ç½®</h3>
                        <div class="form-group">
                            <label for="lowConfidenceThreshold">ä½ç½®ä¿¡åº¦é˜ˆå€¼:</label>
                            <input type="number" id="lowConfidenceThreshold" value="0.5" min="0" max="1" step="0.1">
                        </div>
                        <div class="form-group">
                            <label for="lowQualityThreshold">ä½è´¨é‡é˜ˆå€¼:</label>
                            <input type="number" id="lowQualityThreshold" value="60" min="0" max="100">
                        </div>
                    </div>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="initializeManager()">ğŸš€ åˆå§‹åŒ–ç®¡ç†å™¨</button>
                    <button class="btn btn-success" onclick="startAnalysis()">â–¶ï¸ å¼€å§‹åˆ†æ</button>
                    <button class="btn btn-warning" onclick="stopAnalysis()">â¹ï¸ åœæ­¢åˆ†æ</button>
                    <button class="btn btn-info" onclick="resetManager()">ğŸ”„ é‡ç½®ç®¡ç†å™¨</button>
                </div>
            </div>
            
            <!-- çŠ¶æ€é¢æ¿ -->
            <div class="demo-section">
                <h2>ğŸ“Š ç³»ç»ŸçŠ¶æ€</h2>
                <div class="status-panel">
                    <div class="status-grid">
                        <div class="status-item">
                            <div class="status-value" id="analysisCount">0</div>
                            <div class="status-label">æ€»åˆ†ææ¬¡æ•°</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="avgProcessingTime">0ms</div>
                            <div class="status-label">å¹³å‡å¤„ç†æ—¶é—´</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="cacheHitRate">0%</div>
                            <div class="status-label">ç¼“å­˜å‘½ä¸­ç‡</div>
                        </div>
                        <div class="status-item">
                            <div class="status-value" id="systemStatus">å¾…æœº</div>
                            <div class="status-label">ç³»ç»ŸçŠ¶æ€</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- æ¨¡æ‹Ÿåˆ†æ -->
            <div class="demo-section">
                <h2>ğŸ¯ æ¨¡æ‹Ÿåˆ†ææµ‹è¯•</h2>
                <div class="controls">
                    <button class="btn btn-primary" onclick="simulateSquatAnalysis()">ğŸ‹ï¸ æ¨¡æ‹Ÿæ·±è¹²åˆ†æ</button>
                    <button class="btn btn-primary" onclick="simulatePushUpAnalysis()">ğŸ’ª æ¨¡æ‹Ÿä¿¯å§æ’‘åˆ†æ</button>
                    <button class="btn btn-primary" onclick="simulateRunningAnalysis()">ğŸƒ æ¨¡æ‹Ÿè·‘æ­¥åˆ†æ</button>
                    <button class="btn btn-info" onclick="runBatchAnalysis()">ğŸ“¦ æ‰¹é‡åˆ†ææµ‹è¯•</button>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="analysisProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- åˆ†æç»“æœ -->
            <div class="demo-section">
                <h2>ğŸ“‹ åˆ†æç»“æœ</h2>
                <div class="results-panel">
                    <div class="results-header">æœ€æ–°åˆ†æç»“æœ</div>
                    <div class="results-content" id="resultsContent">
                        <p style="text-align: center; color: #666; margin: 40px 0;">æš‚æ— åˆ†æç»“æœ</p>
                    </div>
                </div>
            </div>
            
            <!-- æ€§èƒ½æŒ‡æ ‡ -->
            <div class="demo-section">
                <h2>âš¡ æ€§èƒ½æŒ‡æ ‡</h2>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h3>åˆ†æå¼•æ“</h3>
                        <ul class="metric-list" id="engineMetrics">
                            <li><span>æ€»åˆ†ææ¬¡æ•°</span><span class="metric-value">0</span></li>
                            <li><span>æˆåŠŸç‡</span><span class="metric-value">0%</span></li>
                            <li><span>å¹³å‡ç½®ä¿¡åº¦</span><span class="metric-value">0%</span></li>
                        </ul>
                    </div>
                    
                    <div class="metric-card">
                        <h3>æ€§èƒ½ç›‘æ§</h3>
                        <ul class="metric-list" id="performanceMetrics">
                            <li><span>å¹³å‡FPS</span><span class="metric-value">0</span></li>
                            <li><span>å¹³å‡å»¶è¿Ÿ</span><span class="metric-value">0ms</span></li>
                            <li><span>å†…å­˜ä½¿ç”¨</span><span class="metric-value">0MB</span></li>
                        </ul>
                    </div>
                    
                    <div class="metric-card">
                        <h3>è´¨é‡è¯„ä¼°</h3>
                        <ul class="metric-list" id="qualityMetrics">
                            <li><span>å¹³å‡è´¨é‡åˆ†æ•°</span><span class="metric-value">0</span></li>
                            <li><span>è¯„ä¼°æ¬¡æ•°</span><span class="metric-value">0</span></li>
                            <li><span>æ”¹è¿›å»ºè®®æ•°</span><span class="metric-value">0</span></li>
                        </ul>
                    </div>
                    
                    <div class="metric-card">
                        <h3>ç”Ÿç‰©åŠ›å­¦</h3>
                        <ul class="metric-list" id="biomechanicsMetrics">
                            <li><span>åˆ†ææ¬¡æ•°</span><span class="metric-value">0</span></li>
                            <li><span>å¹³å‡æ•ˆç‡</span><span class="metric-value">0%</span></li>
                            <li><span>é£é™©è¯„ä¼°</span><span class="metric-value">ä½</span></li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- ç³»ç»Ÿæ—¥å¿— -->
            <div class="demo-section">
                <h2>ğŸ“ ç³»ç»Ÿæ—¥å¿—</h2>
                <div class="log-panel" id="systemLog">
                    <div class="log-entry log-info">[INFO] ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ª</div>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module">
        // æ¨¡æ‹Ÿ AnalysisManagerï¼ˆå®é™…ä½¿ç”¨æ—¶åº”å¯¼å…¥çœŸå®æ¨¡å—ï¼‰
        class MockAnalysisManager {
            constructor(config = {}) {
                this.config = {
                    mode: 'comprehensive',
                    realTimeAnalysis: true,
                    enableDataSmoothing: true,
                    enableOutlierDetection: true,
                    enableTrendAnalysis: true,
                    outputFormat: 'detailed',
                    enablePerformanceOptimization: true,
                    enableCaching: true,
                    adaptiveQuality: true,
                    warningThresholds: {
                        lowConfidence: 0.5,
                        lowQuality: 60
                    },
                    ...config
                };
                
                this.state = {
                    isActive: false,
                    totalAnalyses: 0,
                    errors: [],
                    warnings: []
                };
                
                this.stats = {
                    manager: {
                        totalAnalyses: 0,
                        errors: 0,
                        warnings: 0,
                        cacheHitRate: 0
                    },
                    performance: {
                        avgFPS: 0,
                        avgLatency: 0,
                        memoryUsage: 0
                    },
                    quality: {
                        avgScore: 0,
                        assessmentCount: 0,
                        recommendationCount: 0
                    },
                    biomechanics: {
                        analysisCount: 0,
                        avgEfficiency: 0,
                        riskLevel: 'low'
                    }
                };
                
                this.eventListeners = new Map();
            }
            
            start() {
                this.state.isActive = true;
                this._log('info', 'åˆ†æç®¡ç†å™¨å·²å¯åŠ¨');
            }
            
            stop() {
                this.state.isActive = false;
                this._log('info', 'åˆ†æç®¡ç†å™¨å·²åœæ­¢');
            }
            
            async analyze(keypoints, options = {}) {
                if (!this.state.isActive) {
                    throw new Error('åˆ†æç®¡ç†å™¨æœªå¯åŠ¨');
                }
                
                const startTime = performance.now();
                
                // æ¨¡æ‹Ÿåˆ†æè¿‡ç¨‹
                await new Promise(resolve => setTimeout(resolve, Math.random() * 50 + 20));
                
                const processingTime = performance.now() - startTime;
                this.state.totalAnalyses++;
                
                // ç”Ÿæˆæ¨¡æ‹Ÿç»“æœ
                const result = this._generateMockResult(keypoints, options, processingTime);
                
                // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
                this._updateStats(result, processingTime);
                
                // å‘é€äº‹ä»¶
                this._emitEvent('analysis_complete', { result, processingTime });
                
                this._log('info', `åˆ†æå®Œæˆ: ${result.exerciseType}, è´¨é‡: ${result.quality}`);
                
                return result;
            }
            
            reset() {
                this.state.totalAnalyses = 0;
                this.state.errors = [];
                this.state.warnings = [];
                this._resetStats();
                this._log('info', 'åˆ†æç®¡ç†å™¨å·²é‡ç½®');
            }
            
            getStatus() {
                return {
                    ...this.state,
                    config: this.config
                };
            }
            
            getStats() {
                return this.stats;
            }
            
            addEventListener(event, callback) {
                if (!this.eventListeners.has(event)) {
                    this.eventListeners.set(event, []);
                }
                this.eventListeners.get(event).push(callback);
            }
            
            _generateMockResult(keypoints, options, processingTime) {
                const exerciseTypes = ['squat', 'pushup', 'running', 'plank', 'lunge'];
                const exerciseType = options.exerciseType || exerciseTypes[Math.floor(Math.random() * exerciseTypes.length)];
                
                return {
                    exerciseType,
                    repetitions: Math.floor(Math.random() * 20) + 1,
                    quality: Math.floor(Math.random() * 40) + 60,
                    confidence: Math.random() * 0.4 + 0.6,
                    phase: ['preparation', 'execution', 'recovery'][Math.floor(Math.random() * 3)],
                    timestamp: Date.now(),
                    qualityAssessment: {
                        overallScore: Math.floor(Math.random() * 30) + 70,
                        technicalScore: Math.floor(Math.random() * 30) + 70,
                        safetyScore: Math.floor(Math.random() * 30) + 70,
                        recommendations: [
                            'ä¿æŒèƒŒéƒ¨æŒºç›´',
                            'æ§åˆ¶åŠ¨ä½œé€Ÿåº¦',
                            'æ³¨æ„å‘¼å¸èŠ‚å¥'
                        ]
                    },
                    biomechanics: {
                        efficiency: Math.random() * 0.3 + 0.7,
                        symmetry: Math.random() * 0.2 + 0.8,
                        stability: Math.random() * 0.2 + 0.8,
                        overallScore: Math.floor(Math.random() * 30) + 70
                    },
                    kinematics: {
                        smoothness: Math.random() * 0.3 + 0.7,
                        overallScore: Math.floor(Math.random() * 30) + 70
                    },
                    comprehensiveScore: Math.floor(Math.random() * 30) + 70,
                    metadata: {
                        analysisMode: this.config.mode,
                        processingTime,
                        timestamp: Date.now()
                    }
                };
            }
            
            _updateStats(result, processingTime) {
                this.stats.manager.totalAnalyses++;
                this.stats.manager.cacheHitRate = Math.min(95, this.stats.manager.cacheHitRate + 1);
                
                this.stats.performance.avgFPS = Math.floor(1000 / (processingTime + Math.random() * 10));
                this.stats.performance.avgLatency = Math.floor(processingTime);
                this.stats.performance.memoryUsage = Math.floor(Math.random() * 50 + 100);
                
                this.stats.quality.avgScore = Math.floor((this.stats.quality.avgScore + result.quality) / 2);
                this.stats.quality.assessmentCount++;
                this.stats.quality.recommendationCount += result.qualityAssessment.recommendations.length;
                
                this.stats.biomechanics.analysisCount++;
                this.stats.biomechanics.avgEfficiency = Math.floor(result.biomechanics.efficiency * 100);
            }
            
            _resetStats() {
                this.stats = {
                    manager: { totalAnalyses: 0, errors: 0, warnings: 0, cacheHitRate: 0 },
                    performance: { avgFPS: 0, avgLatency: 0, memoryUsage: 0 },
                    quality: { avgScore: 0, assessmentCount: 0, recommendationCount: 0 },
                    biomechanics: { analysisCount: 0, avgEfficiency: 0, riskLevel: 'low' }
                };
            }
            
            _emitEvent(event, data) {
                if (this.eventListeners.has(event)) {
                    this.eventListeners.get(event).forEach(callback => callback(data));
                }
            }
            
            _log(level, message) {
                const timestamp = new Date().toLocaleTimeString();
                const logEntry = `[${timestamp}] [${level.toUpperCase()}] ${message}`;
                
                if (typeof window !== 'undefined') {
                    window.addLogEntry(level, logEntry);
                }
            }
        }
        
        // å…¨å±€å˜é‡
        let analysisManager = null;
        let analysisInterval = null;
        let analysisCount = 0;
        
        // å…¨å±€å‡½æ•°
        window.initializeManager = function() {
            const config = {
                mode: document.getElementById('analysisMode').value,
                outputFormat: document.getElementById('outputFormat').value,
                enablePerformanceOptimization: document.getElementById('enablePerformanceOptimization').checked,
                enableCaching: document.getElementById('enableCaching').checked,
                adaptiveQuality: document.getElementById('adaptiveQuality').checked,
                enableDataSmoothing: document.getElementById('enableDataSmoothing').checked,
                enableOutlierDetection: document.getElementById('enableOutlierDetection').checked,
                enableTrendAnalysis: document.getElementById('enableTrendAnalysis').checked,
                warningThresholds: {
                    lowConfidence: parseFloat(document.getElementById('lowConfidenceThreshold').value),
                    lowQuality: parseInt(document.getElementById('lowQualityThreshold').value)
                }
            };
            
            analysisManager = new MockAnalysisManager(config);
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            analysisManager.addEventListener('analysis_complete', (data) => {
                updateResults(data.result);
                updateMetrics();
            });
            
            updateStatus();
            addLogEntry('info', 'åˆ†æç®¡ç†å™¨å·²åˆå§‹åŒ–');
        };
        
        window.startAnalysis = function() {
            if (!analysisManager) {
                alert('è¯·å…ˆåˆå§‹åŒ–ç®¡ç†å™¨');
                return;
            }
            
            analysisManager.start();
            document.getElementById('systemStatus').textContent = 'è¿è¡Œä¸­';
            document.getElementById('systemStatus').className = 'status-value analyzing';
            
            // å¼€å§‹å®šæœŸåˆ†æï¼ˆæ¨¡æ‹Ÿå®æ—¶åˆ†æï¼‰
            analysisInterval = setInterval(() => {
                simulateRandomAnalysis();
            }, 2000);
            
            addLogEntry('info', 'å¼€å§‹å®æ—¶åˆ†æ');
        };
        
        window.stopAnalysis = function() {
            if (!analysisManager) return;
            
            analysisManager.stop();
            document.getElementById('systemStatus').textContent = 'å·²åœæ­¢';
            document.getElementById('systemStatus').className = 'status-value';
            
            if (analysisInterval) {
                clearInterval(analysisInterval);
                analysisInterval = null;
            }
            
            addLogEntry('info', 'åœæ­¢å®æ—¶åˆ†æ');
        };
        
        window.resetManager = function() {
            if (!analysisManager) return;
            
            analysisManager.reset();
            analysisCount = 0;
            
            // é‡ç½®UI
            document.getElementById('analysisCount').textContent = '0';
            document.getElementById('avgProcessingTime').textContent = '0ms';
            document.getElementById('cacheHitRate').textContent = '0%';
            document.getElementById('systemStatus').textContent = 'å·²é‡ç½®';
            document.getElementById('resultsContent').innerHTML = '<p style="text-align: center; color: #666; margin: 40px 0;">æš‚æ— åˆ†æç»“æœ</p>';
            
            updateMetrics();
            addLogEntry('info', 'ç®¡ç†å™¨å·²é‡ç½®');
        };
        
        window.simulateSquatAnalysis = async function() {
            if (!analysisManager || !analysisManager.state.isActive) {
                alert('è¯·å…ˆå¯åŠ¨åˆ†æç®¡ç†å™¨');
                return;
            }
            
            const mockKeypoints = generateMockKeypoints();
            try {
                const result = await analysisManager.analyze(mockKeypoints, { exerciseType: 'squat' });
                addLogEntry('info', `æ·±è¹²åˆ†æå®Œæˆ: è´¨é‡åˆ†æ•° ${result.quality}`);
            } catch (error) {
                addLogEntry('error', `æ·±è¹²åˆ†æå¤±è´¥: ${error.message}`);
            }
        };
        
        window.simulatePushUpAnalysis = async function() {
            if (!analysisManager || !analysisManager.state.isActive) {
                alert('è¯·å…ˆå¯åŠ¨åˆ†æç®¡ç†å™¨');
                return;
            }
            
            const mockKeypoints = generateMockKeypoints();
            try {
                const result = await analysisManager.analyze(mockKeypoints, { exerciseType: 'pushup' });
                addLogEntry('info', `ä¿¯å§æ’‘åˆ†æå®Œæˆ: è´¨é‡åˆ†æ•° ${result.quality}`);
            } catch (error) {
                addLogEntry('error', `ä¿¯å§æ’‘åˆ†æå¤±è´¥: ${error.message}`);
            }
        };
        
        window.simulateRunningAnalysis = async function() {
            if (!analysisManager || !analysisManager.state.isActive) {
                alert('è¯·å…ˆå¯åŠ¨åˆ†æç®¡ç†å™¨');
                return;
            }
            
            const mockKeypoints = generateMockKeypoints();
            try {
                const result = await analysisManager.analyze(mockKeypoints, { exerciseType: 'running' });
                addLogEntry('info', `è·‘æ­¥åˆ†æå®Œæˆ: è´¨é‡åˆ†æ•° ${result.quality}`);
            } catch (error) {
                addLogEntry('error', `è·‘æ­¥åˆ†æå¤±è´¥: ${error.message}`);
            }
        };
        
        window.runBatchAnalysis = async function() {
            if (!analysisManager || !analysisManager.state.isActive) {
                alert('è¯·å…ˆå¯åŠ¨åˆ†æç®¡ç†å™¨');
                return;
            }
            
            const batchSize = 10;
            const progressBar = document.getElementById('analysisProgress');
            
            addLogEntry('info', `å¼€å§‹æ‰¹é‡åˆ†æ (${batchSize} ä¸ªæ ·æœ¬)`);
            
            for (let i = 0; i < batchSize; i++) {
                const progress = ((i + 1) / batchSize) * 100;
                progressBar.style.width = `${progress}%`;
                
                const mockKeypoints = generateMockKeypoints();
                try {
                    await analysisManager.analyze(mockKeypoints);
                    await new Promise(resolve => setTimeout(resolve, 100)); // æ¨¡æ‹Ÿå¤„ç†å»¶è¿Ÿ
                } catch (error) {
                    addLogEntry('error', `æ‰¹é‡åˆ†æç¬¬ ${i + 1} é¡¹å¤±è´¥: ${error.message}`);
                }
            }
            
            addLogEntry('info', 'æ‰¹é‡åˆ†æå®Œæˆ');
            setTimeout(() => {
                progressBar.style.width = '0%';
            }, 2000);
        };
        
        window.addLogEntry = function(level, message) {
            const logPanel = document.getElementById('systemLog');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${level}`;
            entry.textContent = message;
            
            logPanel.appendChild(entry);
            logPanel.scrollTop = logPanel.scrollHeight;
            
            // é™åˆ¶æ—¥å¿—æ¡ç›®æ•°é‡
            while (logPanel.children.length > 100) {
                logPanel.removeChild(logPanel.firstChild);
            }
        };
        
        function generateMockKeypoints() {
            const keypoints = [];
            for (let i = 0; i < 17; i++) {
                keypoints.push({
                    x: Math.random() * 640,
                    y: Math.random() * 480,
                    confidence: Math.random() * 0.4 + 0.6
                });
            }
            return keypoints;
        }
        
        function simulateRandomAnalysis() {
            const exercises = ['squat', 'pushup', 'running', 'plank', 'lunge'];
            const randomExercise = exercises[Math.floor(Math.random() * exercises.length)];
            
            const mockKeypoints = generateMockKeypoints();
            analysisManager.analyze(mockKeypoints, { exerciseType: randomExercise })
                .catch(error => {
                    addLogEntry('error', `éšæœºåˆ†æå¤±è´¥: ${error.message}`);
                });
        }
        
        function updateResults(result) {
            const resultsContent = document.getElementById('resultsContent');
            
            const resultItem = document.createElement('div');
            resultItem.className = 'result-item';
            
            const timestamp = document.createElement('div');
            timestamp.className = 'result-timestamp';
            timestamp.textContent = new Date(result.timestamp).toLocaleString();
            
            const data = document.createElement('div');
            data.className = 'result-data';
            data.textContent = JSON.stringify(result, null, 2);
            
            resultItem.appendChild(timestamp);
            resultItem.appendChild(data);
            
            resultsContent.insertBefore(resultItem, resultsContent.firstChild);
            
            // é™åˆ¶ç»“æœæ˜¾ç¤ºæ•°é‡
            while (resultsContent.children.length > 10) {
                resultsContent.removeChild(resultsContent.lastChild);
            }
        }
        
        function updateStatus() {
            if (!analysisManager) return;
            
            const status = analysisManager.getStatus();
            const stats = analysisManager.getStats();
            
            document.getElementById('analysisCount').textContent = status.totalAnalyses;
            document.getElementById('avgProcessingTime').textContent = `${stats.performance.avgLatency}ms`;
            document.getElementById('cacheHitRate').textContent = `${stats.manager.cacheHitRate}%`;
        }
        
        function updateMetrics() {
            if (!analysisManager) return;
            
            const stats = analysisManager.getStats();
            
            // æ›´æ–°å¼•æ“æŒ‡æ ‡
            const engineMetrics = document.getElementById('engineMetrics');
            engineMetrics.innerHTML = `
                <li><span>æ€»åˆ†ææ¬¡æ•°</span><span class="metric-value">${stats.manager.totalAnalyses}</span></li>
                <li><span>æˆåŠŸç‡</span><span class="metric-value">98%</span></li>
                <li><span>å¹³å‡ç½®ä¿¡åº¦</span><span class="metric-value">85%</span></li>
            `;
            
            // æ›´æ–°æ€§èƒ½æŒ‡æ ‡
            const performanceMetrics = document.getElementById('performanceMetrics');
            performanceMetrics.innerHTML = `
                <li><span>å¹³å‡FPS</span><span class="metric-value">${stats.performance.avgFPS}</span></li>
                <li><span>å¹³å‡å»¶è¿Ÿ</span><span class="metric-value">${stats.performance.avgLatency}ms</span></li>
                <li><span>å†…å­˜ä½¿ç”¨</span><span class="metric-value">${stats.performance.memoryUsage}MB</span></li>
            `;
            
            // æ›´æ–°è´¨é‡æŒ‡æ ‡
            const qualityMetrics = document.getElementById('qualityMetrics');
            qualityMetrics.innerHTML = `
                <li><span>å¹³å‡è´¨é‡åˆ†æ•°</span><span class="metric-value">${stats.quality.avgScore}</span></li>
                <li><span>è¯„ä¼°æ¬¡æ•°</span><span class="metric-value">${stats.quality.assessmentCount}</span></li>
                <li><span>æ”¹è¿›å»ºè®®æ•°</span><span class="metric-value">${stats.quality.recommendationCount}</span></li>
            `;
            
            // æ›´æ–°ç”Ÿç‰©åŠ›å­¦æŒ‡æ ‡
            const biomechanicsMetrics = document.getElementById('biomechanicsMetrics');
            biomechanicsMetrics.innerHTML = `
                <li><span>åˆ†ææ¬¡æ•°</span><span class="metric-value">${stats.biomechanics.analysisCount}</span></li>
                <li><span>å¹³å‡æ•ˆç‡</span><span class="metric-value">${stats.biomechanics.avgEfficiency}%</span></li>
                <li><span>é£é™©è¯„ä¼°</span><span class="metric-value">${stats.biomechanics.riskLevel}</span></li>
            `;
        }
        
        // å®šæœŸæ›´æ–°çŠ¶æ€
        setInterval(() => {
            updateStatus();
        }, 1000);
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            addLogEntry('info', 'æ¼”ç¤ºé¡µé¢å·²åŠ è½½');
        });
    </script>
</body>
</html>